# DataMaker

# 1. 概要
　動画を任意の秒数に区切り保存することができる。
同時に、区切った動画のフレーム、音声データの抽出を行い、抽出したフレームから口元領域の切り出しと、音声データから音声認識ライブラリを用いて文字起しを行うことのできるコンソールアプリケーションである。
 
# 2. 環境
## [仕様]
- Python3
- [OpenCV](https://opencv.org)
- [FFmpeg](https://ffmpeg.org)
- [FaceAlignment](https://github.com/1adrianb/face-alignment)
- [ESPNet](https://github.com/espnet/espnet)

# 3. 詳細
## [機能一覧]
- 長い動画を小分けにする
- 小分けにした動画からフレーム、音声データの抽出
- フレームから口元領域の切り出し
- 音声データから文章データの生成

## [詳細]
　本システムは卒業研究で用いるためのデータを自動で生成するために作成した。

### (動画の小分け機能)
　1つの長い動画データをffmpegを用いて、任意の秒数で小分けにし、保存する。
 
### (小分けデータからフレームと音声を抽出する機能)
　FFmpegを用いて小分けにした動画データからフレームと、音声データを抽出し、保存する。

### (フレームから口元切り出しを行う機能)
　上記の機能により抽出された、フレームデータからOpenCV、FaceAlignmentを用いて、口元のランドマークを取得し、ランドマークをもとに、口元領域を切り出したフレームデータを生成する。
また、ターゲットのフレームデータのフレーム全てで口元の検出が行えなかった場合は、ストレージ圧迫の問題を避けるために、ターゲットの小分けにした動画および、フレーム、音声データを削除する。

### (音声認識による文章データ生成機能)
　抽出した音声データをもとに、ESPNetのAPIを用いることで、ターゲットの音声データから文章データを生成する。
また、上記で口元の検出に失敗しているデータは処理対象外となる。


# 4. 注意事項
　***※使用する際は、パスの設定や、各処理の調整を各自の環境に合うように行なってください。***


